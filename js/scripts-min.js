(()=>{"use strict";let e=[],t=["C","D","H","S"],l=["A","J","Q","K"],a=[],d=document.getElementById("btnAskCard"),n=document.getElementById("btnStop"),r=document.getElementById("btnNewGame"),s=document.querySelectorAll("small"),i=document.querySelectorAll(".display-cards"),o=()=>{e=[];for(let a=2;a<=10;a++)for(let d of t)e.push(`${a}${d}`);for(let n of t)for(let r of l)e.push(`${r}${n}`);return _.shuffle(e)},c=(t=2)=>{console.clear(),e=o(),a=[];for(let l=0;l<t;l++)a.push(0),s[l].innerText=0,i[l].innerHTML="";d.disabled=!1,n.disabled=!1},$=()=>0===e.length?alert("El deck esta vac\xedo"):e.pop(),g=e=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"==t?11:10:parseInt(t)},u=(e,t)=>(a[t]+=g(e),s[t].innerText=a[t],a[t]),b=(e,t)=>{let l=document.createElement("img");l.src=`assets/cards/${e}.webp`,l.classList.add("card"),l.alt=`image ${e}`,i[t].append(l)},p=()=>{let[e,t]=a;setTimeout(()=>{e===t?(console.warn("No hay ganador"),alert("Nadie gana")):e>21||t<=21&&t>e?(console.warn("Perdiste el juego"),alert("Has perdido")):t>21&&(console.warn("Ganaste el juego"),alert("Has ganado"))},1200)},f=e=>{let t=0;do{let l=$();t=u(l,a.length-1),b(l,a.length-1)}while(t<e&&e<=21);p()};d.addEventListener("click",()=>{let e=$(),t=u(e,0);b(e,0),(t>21||21===t)&&(d.disabled=!0,n.disabled=!0,f(t))}),n.addEventListener("click",()=>{d.disabled=!0,n.disabled=!0,f(a[0])}),r.addEventListener("click",()=>{c()})})();